lex import {
    obj ArrayUInt8
}

lex main : import

fn main() {
    obj BUF = obj(ArrayUInt8)
    obj fh = open "lib/primitives.moarvm", "r"
    obj buf = create BUF
    read fh, buf, 8
    close fh

    say "ok"
    exit 0
}

fn import() {
    use arrays

    obj ARRAY_U8 = getlexrel arrays, "ArrayUInt8"
    bindlex ArrayUInt8, ARRAY_U8

    obj mainfn = getcode main
    obj context = ctx
    forceouterctx mainfn, context
    main()
}
